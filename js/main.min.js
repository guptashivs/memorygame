!function(){"use strict";angular.module("memoryGameAPP",[]).controller("memoryGameController",["$scope","storageService",function(e,a){var l=this;function t(){var e=0;l.tiles=[],l.highestScore=0,l.countDiamonds=0;l.showModal=!1;var t=l.settings.size;null===a.get("highestScore")&&a.set("highestScore",l.highestScore),l.preHighScore=parseInt(a.get("highestScore")),l.settings.playerScore=t*t;for(var s=0;s<t;s++){for(var r=[],o=0;o<t;o++){var i={index:e,isOpened:!1,hasDiamond:!1};e++,r.push(i)}l.tiles.push(r)}!function(e){var t=[],s=e.length,r=l.settings.size,o=t.length;for(;o<r;){var i=Math.floor(Math.random()*r*r);t.indexOf(i)<0&&(t.push(i),0),o=t.length}for(var a=0;a<s;a++)for(var n=0;n<s;n++)0<=t.indexOf(e[a][n].index)&&(e[a][n].hasDiamond=!0);l.tiles=[],l.tiles=e}(l.tiles)}l.addActive=!1,l.tiles=[],l.countDiamonds=0,l.highestScore=0,l.showModal=!1,l.settings={playerName:"",size:8,playerScore:0},l.boardSize=[{text:"Small (4x4)",value:4},{text:"Medium (6x6)",value:6},{text:"Large (8x8)",value:8}],l.initTiles=t,l.calculateScore=function(e){e.isOpened=!0,1==e.hasDiamond&&l.countDiamonds++;if(l.settings.playerScore=l.settings.playerScore-1,l.countDiamonds==l.settings.size&&null!==a.get("highestScore")){l.settings.playerScore>l.preHighScore&&(l.preHighScore=l.settings.playerScore,l.highestScore=l.settings.playerScore,a.set("highestScore",l.highestScore));var t=$("#gameModal");t.modal("show")}},t()}])}();